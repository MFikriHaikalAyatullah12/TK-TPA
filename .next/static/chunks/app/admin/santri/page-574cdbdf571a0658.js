(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{67:function(){},2061:function(){},5854:function(e,a,t){Promise.resolve().then(t.bind(t,2160))},2160:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var r=t(7437),n=t(2265),s=t(3753),l=t(5044),i=t(5255),d=t(1396),o=t.n(d),m=t(7504);function c(){let[e,a]=(0,n.useState)([]),[t,d]=(0,n.useState)(!0),[c,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[g,p]=(0,n.useState)({nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",alamat:"",namaAyah:"",namaIbu:"",pekerjaanAyah:"",pekerjaanIbu:"",nomorTelepon:"",pendidikanTerakhir:"",alamatEmail:"",statusPendaftaran:"DITERIMA",keterangan:""});(0,n.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/admin/santri");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Error fetching santri:",e)}finally{d(!1)}},f=async e=>{e.preventDefault();try{let e=u?"/api/admin/santri/".concat(u):"/api/admin/santri",a=u?"PUT":"POST";(await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(b(),k())}catch(e){console.error("Error saving santri:",e)}},y=e=>{p({nama:e.nama,tempatLahir:e.tempatLahir,tanggalLahir:e.tanggalLahir.split("T")[0],jenisKelamin:e.jenisKelamin,alamat:e.alamat,namaAyah:e.namaAyah,namaIbu:e.namaIbu,pekerjaanAyah:e.pekerjaanAyah,pekerjaanIbu:e.pekerjaanIbu,nomorTelepon:e.nomorTelepon,pendidikanTerakhir:e.pendidikanTerakhir||"",alamatEmail:e.alamatEmail||"",statusPendaftaran:e.statusPendaftaran,keterangan:e.keterangan||""}),h(e.id),x(!0)},j=async e=>{if(confirm("Apakah Anda yakin ingin menghapus data santri ini?"))try{(await fetch("/api/admin/santri/".concat(e),{method:"DELETE"})).ok&&b()}catch(e){console.error("Error deleting santri:",e)}},k=()=>{p({nama:"",tempatLahir:"",tanggalLahir:"",jenisKelamin:"Laki-laki",alamat:"",namaAyah:"",namaIbu:"",pekerjaanAyah:"",pekerjaanIbu:"",nomorTelepon:"",pendidikanTerakhir:"",alamatEmail:"",statusPendaftaran:"DITERIMA",keterangan:""}),h(null),x(!1)};return t?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50",children:(0,r.jsx)("div",{className:"py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"pb-6 border-b border-blue-200 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)(o(),{href:"/admin",className:"mr-4 inline-flex items-center px-4 py-2 border border-blue-200 shadow-sm text-sm leading-4 font-medium rounded-lg text-blue-700 bg-white/80 backdrop-blur-lg hover:bg-blue-50 transition-all duration-200",children:[(0,r.jsx)(s.Z,{className:"h-4 w-4 mr-2"}),"Kembali"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold leading-tight bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent",children:"Data Santri"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>{let a=e.map(e=>({Nama:e.nama,"Tempat Lahir":e.tempatLahir,"Tanggal Lahir":new Date(e.tanggalLahir).toLocaleDateString("id-ID"),"Jenis Kelamin":e.jenisKelamin,Alamat:e.alamat,"Nama Ayah":e.namaAyah,"Nama Ibu":e.namaIbu,"Pekerjaan Ayah":e.pekerjaanAyah,"Pekerjaan Ibu":e.pekerjaanIbu,"Nomor Telepon":e.nomorTelepon,"Pendidikan Terakhir":e.pendidikanTerakhir||"",Email:e.alamatEmail||"","Status Pendaftaran":e.statusPendaftaran,Keterangan:e.keterangan||"","Tanggal Daftar":new Date(e.createdAt).toLocaleDateString("id-ID")})),t=m.P6.json_to_sheet(a),r=m.P6.book_new();m.P6.book_append_sheet(r,t,"Data Santri");let n="data-santri-".concat(new Date().toISOString().split("T")[0],".xlsx");m.NC(r,n)},className:"inline-flex items-center px-4 py-2 border border-blue-200 shadow-lg text-sm font-medium rounded-lg text-blue-700 bg-white/80 backdrop-blur-lg hover:bg-blue-50 transition-all duration-200",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),(0,r.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-lg text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 transition-all duration-200",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Tambah Santri"]})]})]}),c&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,r.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit Santri":"Tambah Santri"}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),(0,r.jsx)("input",{type:"text",required:!0,value:g.nama,onChange:e=>p({...g,nama:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tempat Lahir"}),(0,r.jsx)("input",{type:"text",required:!0,value:g.tempatLahir,onChange:e=>p({...g,tempatLahir:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),(0,r.jsx)("input",{type:"date",required:!0,value:g.tanggalLahir,onChange:e=>p({...g,tanggalLahir:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),(0,r.jsxs)("select",{value:g.jenisKelamin,onChange:e=>p({...g,jenisKelamin:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border",children:[(0,r.jsx)("option",{value:"Laki-laki",children:"Laki-laki"}),(0,r.jsx)("option",{value:"Perempuan",children:"Perempuan"})]})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat"}),(0,r.jsx)("textarea",{required:!0,value:g.alamat,onChange:e=>p({...g,alamat:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border",rows:2})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Ayah"}),(0,r.jsx)("input",{type:"text",value:g.namaAyah,onChange:e=>p({...g,namaAyah:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Ibu"}),(0,r.jsx)("input",{type:"text",value:g.namaIbu,onChange:e=>p({...g,namaIbu:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pekerjaan Ayah"}),(0,r.jsx)("input",{type:"text",value:g.pekerjaanAyah,onChange:e=>p({...g,pekerjaanAyah:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pekerjaan Ibu"}),(0,r.jsx)("input",{type:"text",value:g.pekerjaanIbu,onChange:e=>p({...g,pekerjaanIbu:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"No. Telepon"}),(0,r.jsx)("input",{type:"text",required:!0,value:g.nomorTelepon,onChange:e=>p({...g,nomorTelepon:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pendidikan Terakhir"}),(0,r.jsx)("input",{type:"text",value:g.pendidikanTerakhir,onChange:e=>p({...g,pendidikanTerakhir:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",value:g.alamatEmail,onChange:e=>p({...g,alamatEmail:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status Pendaftaran"}),(0,r.jsxs)("select",{value:g.statusPendaftaran,onChange:e=>p({...g,statusPendaftaran:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border",children:[(0,r.jsx)("option",{value:"PENDING",children:"Pending"}),(0,r.jsx)("option",{value:"DITERIMA",children:"Diterima"}),(0,r.jsx)("option",{value:"DITOLAK",children:"Ditolak"})]})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Keterangan"}),(0,r.jsx)("textarea",{value:g.keterangan,onChange:e=>p({...g,keterangan:e.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm px-3 py-2 border",rows:2})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Batal"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:u?"Update":"Simpan"})]})]})]})})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"TTL"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Orang Tua"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontak"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nama}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.jenisKelamin})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.tempatLahir,", ",new Date(e.tanggalLahir).toLocaleDateString("id-ID")]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:["Ayah: ",e.namaAyah]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Ibu: ",e.namaIbu]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.nomorTelepon}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.alamatEmail||"-"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("DITERIMA"===e.statusPendaftaran?"bg-green-100 text-green-800":"PENDING"===e.statusPendaftaran?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"DITERIMA"===e.statusPendaftaran?"Diterima":"PENDING"===e.statusPendaftaran?"Pending":"Ditolak"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>y(e),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-900",children:"Hapus"})]})]},e.id))})]})})})}),0===e.length&&(0,r.jsxs)("div",{className:"mt-6 text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Belum ada data santri"}),(0,r.jsx)("button",{onClick:()=>x(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Tambah Santri Pertama"})]})]})})})}},3753:function(e,a,t){"use strict";var r=t(2265);let n=r.forwardRef(function({title:e,titleId:a,...t},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});a.Z=n},5044:function(e,a,t){"use strict";var r=t(2265);let n=r.forwardRef(function({title:e,titleId:a,...t},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});a.Z=n},5255:function(e,a,t){"use strict";var r=t(2265);let n=r.forwardRef(function({title:e,titleId:a,...t},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});a.Z=n}},function(e){e.O(0,[425,176,971,938,744],function(){return e(e.s=5854)}),_N_E=e.O()}]);